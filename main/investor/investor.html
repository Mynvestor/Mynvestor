<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mynvestor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../../Dist/styles/investorStyles.css">
</head>

<body>
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <a href="#market" class="nav-item active" title="View Market Data" aria-label="Market">
                <i class="bi bi-bar-chart-line nav-icon"></i>Market
            </a>
            <a href="#portfolio" class="nav-item" title="Your Portfolio" aria-label="Portfolio">
                <i class="bi bi-wallet2 nav-icon"></i>Portfolio
            </a>
            <a href="#learn" class="nav-item" title="Browse Lessons" aria-label="Learn">
                <i class="bi bi-book nav-icon"></i>Learn
            </a>
            <a href="#trade" class="nav-item" title="Trade Assets" aria-label="Trade">
                <i class="bi bi-arrow-left-right nav-icon"></i>Trade
            </a>
            <a href="#transfers" class="nav-item" title="Manage Transfers" aria-label="Transfers">
                <i class="bi bi-cash-coin nav-icon"></i>Transfers
            </a>
        </nav>
    </aside>

    <nav class="top-nav">
        <div class="profile-pic" id="profile-pic-container">
            <img src="../../Dist/images/admin.png" alt="Admin Profile">
            <div class="profile-initials" id="user-initials">JD</div>
        </div>
        <div class="company-name"><span class="jon">Myn</span>vestor</div>
           <i class="bi bi-question-circle help-icon notifications-icon" data-bs-toggle="modal" data-bs-target="#helpModal"
            aria-label="Open Help"></i>
    </nav>

    <section id="market" class="content-section active">
        <div class="loading" id="market-loading">Loading...</div>
        <h1 class="mb-2"><i class="bi bi-bar-chart-line me-2"></i>Market</h1>
        <div class="row mb-2" id="indexCards"></div>

        <div class="row mb-2">
            <!-- Top Gainers -->
            <div class="col-md-4 col-xl-4 mb-1"><h2 class="mb-2"><i class="bi bi-arrow-up-circle me-2"></i>Top Gainers</h2><div class="row mb-2"></div></div>
            <!-- Top Losers -->
            <div class="col-md-4 col-xl-4 mb-1"><h2 class="mb-2"><i class="bi bi-arrow-down-circle me-2"></i>Top Losers</h2><div class="row mb-2"></div></div>
            <!-- Volume Gainers -->
            <div class="col-md-4 col-xl-4 mb-1"><h2 class="mb-2"><i class="bi bi-graph-up me-2"></i>Volume Gainers</h2><div class="row mb-2"></div></div>
        </div>

        <h2 class="mb-2"><i class="bi bi-buildings me-2"></i>Main Board</h2>
        <div class="row" id="companyCards"></div>
    </section>

    <section id="portfolio" class="content-section">
        <div class="loading" id="portfolio-loading">Loading...</div>
        <h1 class="mb-2"><i class="bi bi-wallet2 me-2"></i>Portfolio</h1>
        <div class="portfolio-summary">
            <h2><i class="bi bi-pie-chart me-2"></i>Portfolio Overview</h2>
            <div class="row here"></div>
        </div>
        <div class="row mb-2">
            <div class="col-md-6 col-xl-6 mb-1">
                <div class="chart-card">
                    <h3><i class="bi bi-line-chart me-2"></i>Portfolio Performance</h3>
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
            <div class="col-md-6 col-xl-6 mb-1">
                <div class="chart-card">
                    <h3><i class="bi bi-pie-chart-fill me-2"></i>Asset Allocation</h3>
                    <canvas id="allocationChart"></canvas>
                </div>
            </div>
        </div>
        <h2 class="mb-2"><i class="bi bi-list-ul me-2"></i>Your Positions</h2>
        <!-- Portfolio cards will be dynamically inserted here -->
    </section>

    <section id="learn" class="content-section">
        <div class="loading" id="learn-loading">Loading...</div>
        <h1 class="mb-4"><i class="bi bi-book me-2"></i>Learn About Investing</h1>

        <!-- Introduction to Investing -->
        <div class="card mb-4">
            <div class="card-header">
                Introduction to Investing
            </div>
            <div class="card-body">
                <p>Investing is the process of allocating money to assets with the expectation of generating a return
                    over time. It’s a powerful way to build wealth, but it requires knowledge and discipline.</p>
                <ul>
                    <li><strong>Why Invest?</strong> To grow your wealth, beat inflation, and achieve financial goals
                        like retirement or buying a home.</li>
                    <li><strong>Common Assets:</strong> Stocks, bonds, real estate, and mutual funds.</li>
                    <li><strong>Key Principle:</strong> The earlier you start, the more time your investments have to
                        grow through compounding.</li>
                </ul>
                <a href="https://www.investopedia.com/terms/i/investing.asp" target="_blank" class="text-white">Learn
                    More on Investopedia</a>
            </div>
        </div>
        <div class="row g-2">
            <div class="col-md-8 col-xl-8 mb-1">
                <!-- Key Investing Concepts -->
                <div class="card mb-4">
                    <div class="card-header">
                        Key Investing Concepts
                    </div>
                    <div class="card-body">
                        <div class="accordion" id="learnAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="stocksHeading">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#stocksCollapse" aria-expanded="true"
                                        aria-controls="stocksCollapse">
                                        Stocks
                                    </button>
                                </h2>
                                <div id="stocksCollapse" class="accordion-collapse collapse show"
                                    aria-labelledby="stocksHeading" data-bs-parent="#learnAccordion">
                                    <div class="accordion-body">
                                        Stocks represent ownership in a company. When you buy a stock, you own a small
                                        part of
                                        that company and may benefit from its growth and dividends.
                                        <ul>
                                            <li><strong>Types:</strong> Common stocks (voting rights) and preferred
                                                stocks
                                                (priority in dividends).</li>
                                            <li><strong>Risks:</strong> Stock prices can be volatile, influenced by
                                                market
                                                conditions and company performance.</li>
                                            <li><strong>Rewards:</strong> Potential for high returns through capital
                                                gains and
                                                dividends.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="diversificationHeading">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#diversificationCollapse" aria-expanded="false"
                                        aria-controls="diversificationCollapse">
                                        Diversification
                                    </button>
                                </h2>
                                <div id="diversificationCollapse" class="accordion-collapse collapse"
                                    aria-labelledby="diversificationHeading" data-bs-parent="#learnAccordion">
                                    <div class="accordion-body">
                                        Diversification involves spreading your investments across different assets to
                                        reduce
                                        risk.
                                        <ul>
                                            <li><strong>Why Diversify?</strong> If one investment performs poorly,
                                                others may
                                                perform well, balancing your portfolio.</li>
                                            <li><strong>How to Diversify?</strong> Invest in different sectors (e.g.,
                                                technology, healthcare), asset classes (stocks, bonds), and regions.
                                            </li>
                                            <li><strong>Example:</strong> Instead of investing all your money in one
                                                company
                                                like Airtel, spread it across NBM, Illovo, and bonds.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="riskHeading">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#riskCollapse" aria-expanded="false"
                                        aria-controls="riskCollapse">
                                        Risk Management
                                    </button>
                                </h2>
                                <div id="riskCollapse" class="accordion-collapse collapse" aria-labelledby="riskHeading"
                                    data-bs-parent="#learnAccordion">
                                    <div class="accordion-body">
                                        Managing risk is crucial to protect your investments.
                                        <ul>
                                            <li><strong>Assess Risk Tolerance:</strong> Determine how much risk you’re
                                                comfortable with based on your goals and financial situation.</li>
                                            <li><strong>Strategies:</strong> Use stop-loss orders, invest in
                                                low-volatility
                                                assets, and maintain an emergency fund.</li>
                                            <li><strong>Key Metric:</strong> Understand the Price-to-Earnings (P/E)
                                                ratio to
                                                evaluate if a stock is overvalued.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-xl-4 mb-1">
                <!-- Resources -->
                <div class="card mb-4">
                    <div class="card-header">
                        Recommended Resources
                    </div>
                    <div class="card-body">
                        <p>Explore these resources to deepen your understanding of investing:</p>
                        <ul class="list-group">
                            <li class="list-group-item "><a href="https://www.investopedia.com" target="_blank"
                                    class="text-black">Investopedia</a> - Comprehensive articles on investing basics.
                            </li>
                            <li class="list-group-item"><a href="https://www.bloomberg.com" target="_blank"
                                    class="text-black">Bloomberg</a> - Market news and analysis.</li>
                            <li class="list-group-item"><a href="https://www.morningstar.com" target="_blank"
                                    class="text-black">Morningstar</a> - Stock and fund research tools.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section id="trade" class="content-section">
        <div class="loading" id="trade-loading">Loading...</div>
        <h1><i class="bi bi-arrow-left-right me-2"></i>Trade</h1>
        <div class="row mb-2">
            <div class="col-md-6 col-xl-6 mb-1">
                <div class="card">
                    <div class="card-body">
                        <h1 class="mb-4"><i class="bi bi-cart-plus me-2"></i>Place an Order</h1>
                        <div class="mb-2">
                            <input type="text" class="form-control" placeholder="Search companies..." id="companySearch">
                            <div class="list-group mt-1" id="searchResults" style="display:none"></div>
                        </div>
                        <div class="card selected-company mb-2">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-8">
                                        <h4 id="selectedCompany">AIRTEL</h4>
                                        <div class="d-flex align-items-center">
                                            <span class="h5 me-3" id="stockPrice">MK128.11</span>
                                            <span class="text-success" id="priceChange">+2.56%</span>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <canvas id="miniChart" width="100" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row g-2">
                            <div class="col-12">
                                <div class="btn-group w-100">
                                    <button class="btn btn-success active" id="btnBuy">Buy</button>
                                    <button class="btn btn-danger" id="btnSell">Sell</button>
                                </div>
                            </div>
                            <div class="col-12">
                                <select class="form-select" id="orderType">
                                    <option>Market Order</option>
                                    <option>Limit Order</option>
                                    <option>Stop Order</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <input type="number" class="form-control" placeholder="Quantity" id="quantity">
                            </div>
                            <div class="col-12">
                                <div class="card totals p-2">
                                    <div class="d-flex justify-content-between small mb-1">
                                        <span>Total Shares Value:</span>
                                        <span id="sharesValue">MK0.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between small mb-1">
                                        <span>Commission (1 - 2%):</span>
                                        <span id="commission">MK0.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between small mb-1">
                                        <span>Transaction Fee:</span>
                                        <span id="transactionFee">MK550</span>
                                    </div>
                                    <hr class="my-1">
                                    <div class="d-flex justify-content-between fw-bold">
                                        <span>Total Cost:</span>
                                        <span id="totalCost">MK550</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#orderModal">Preview Order</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-xl-6 mb-1">
                <div class="mt-3">
                    <h2 class="mb-2"><i class="bi bi-clock-history me-2"></i>Orders History</h2>
                    <div class="row g-1 mb-2">
                        <div class="col-md-3">
                            <select class="form-select border-secondary" id="orderTypeFilter">
                                <option value="">All Order Types</option>
                                <option value="Market Order">Market Order</option>
                                <option value="Limit Order">Limit Order</option>
                                <option value="Stop Order">Stop Order</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select border-secondary" id="actionFilter">
                                <option value="">All Actions</option>
                                <option value="Buy">Buy</option>
                                <option value="Sell">Sell</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select border-secondary" id="statusFilter">
                                <option value="">All Status</option>
                                <option value="Completed">Completed</option>
                                <option value="Pending">Pending</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <input type="date" class="form-control border-secondary" id="dateFilter">
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Company</th>
                                    <th>Action</th>
                                    <th>Order Type</th>
                                    <th>Quantity</th>
                                    <th>Total Cost</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="transfers" class="content-section">
        <div class="loading" id="transfers-loading">Loading...</div>
        <h1 class="mb-2"><i class="bi bi-cash-coin me-2"></i>Transfers</h1>
        <div class="row g-2">
            <div class="col-md-6 col-xl-6 mb-1">
                <div class="row g-2">
                    <div class="col-md-6 col-xl-6 mb-1">
                        <div class="card">
                            <div class="card-body">
                                <img src="../../Dist/images/airtelmoney.png" alt="Airtel Logo" class="company-logo me-3">
                                <h5 class="card-title">Airtel Money</h5>
                                <p class="card-text">Instant transfers via Airtel Money</p>
                                <div class="d-flex gap-2 justify-content-center">
                                    <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#mobileMoneyDepositModal">
                                        <i class="bi bi-arrow-down-circle me-1"></i>Deposit
                                    </button>
                                    <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#mobileMoneyWithdrawModal">
                                        <i class="bi bi-arrow-up-circle me-1"></i>Withdraw
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-xl-6 mb-1">
                        <div class="card">
                            <div class="card-body">
                                <img src="../../Dist/images/mpamba.png" alt="Mpamba Logo" class="company-logo me-3">
                                <h5 class="card-title">TNM Mpamba</h5>
                                <p class="card-text">Instant transfers via Mpamba</p>
                                <div class="d-flex gap-2 justify-content-center">
                                    <button class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#mobileMoneyDepositModal">
                                        <i class="bi bi-arrow-down-circle me-1"></i>Deposit
                                    </button>
                                    <button class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#mobileMoneyWithdrawModal">
                                        <i class="bi bi-arrow-up-circle me-1"></i>Withdraw
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-xl-6 mb-1">
                <div class="mt-3">
                    <h2 class="mb-2"><i class="bi bi-clock-history me-2"></i>Transaction History</h2>
                    <div class="row g-1 mb-2">
                        <div class="col-md-3">
                            <select class="form-select border-secondary" id="methodFilter">
                                <option value="">All Methods</option>
                                <option value="Airtel Money">Airtel Money</option>
                                <option value="Mpamba">Mpamba</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select border-secondary" id="typeFilter">
                                <option value="">All Types</option>
                                <option value="Deposit">Deposit</option>
                                <option value="Withdrawal">Withdrawal</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select border-secondary" id="statusFilter">
                                <option value="">All Status</option>
                                <option value="Completed">Completed</option>
                                <option value="Pending">Pending</option>
                                <option value="Failed">Failed</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <input type="date" class="form-control border-secondary" id="dateFilter">
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Method</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="transactionTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <nav class="footer-nav">
        <a href="#market" class="nav-item active" title="View Market Data" aria-label="Market">
            <i class="bi bi-bar-chart-line nav-icon"></i>Market
        </a>
        <a href="#portfolio" class="nav-item " title="Your Portfolio" aria-label="Portfolio">
            <i class="bi bi-wallet2 nav-icon"></i>Portfolio
        </a>
        <a href="#learn" class="nav-item" title="Browse Lessons" aria-label="Learn">
            <i class="bi bi-book nav-icon"></i>Learn
        </a>
        <a href="#trade" class="nav-item" title="Trade Assets" aria-label="Trade">
            <i class="bi bi-arrow-left-right nav-icon"></i>Trade
        </a>
        <a href="#transfers" class="nav-item" title="Manage Transfers" aria-label="Transfers">
            <i class="bi bi-cash-coin nav-icon"></i>Transfers
        </a>
    </nav>

    <div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content ">
                <div class="modal-header">
                    <h5 class="modal-title" id="helpModalLabel"><i class="bi bi-question-circle me-2"></i>Help & FAQs
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq1Heading">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq1Collapse" aria-expanded="true" aria-controls="faq1Collapse">
                                    How do I buy or sell stocks on Mynvestor?
                                </button>
                            </h2>
                            <div id="faq1Collapse" class="accordion-collapse collapse show"
                                aria-labelledby="faq1Heading" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    To buy or sell stocks, navigate to the "Trade" section, search for the desired
                                    company, select "Buy" or "Sell," enter the quantity, and confirm your order. Ensure
                                    you have sufficient funds for buying or shares for selling.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq2Heading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq2Collapse" aria-expanded="false" aria-controls="faq2Collapse">
                                    How can I deposit funds into my account?
                                </button>
                            </h2>
                            <div id="faq2Collapse" class="accordion-collapse collapse" aria-labelledby="faq2Heading"
                                data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Go to the "Transfers" section and choose from Mobile Money, Bank Deposit, or
                                    Credit/Debit Card options. Follow the prompts to enter your details and confirm the
                                    deposit. Mobile Money and card deposits are instant, while bank deposits may take
                                    1-3 business days.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq3Heading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq3Collapse" aria-expanded="false" aria-controls="faq3Collapse">
                                    What is diversification, and why is it important?
                                </button>
                            </h2>
                            <div id="faq3Collapse" class="accordion-collapse collapse" aria-labelledby="faq3Heading"
                                data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Diversification involves spreading your investments across different assets to
                                    reduce risk. It’s important because it helps balance your portfolio, so poor
                                    performance in one investment can be offset by others. Learn more in the "Learn"
                                    section.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq4Heading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq4Collapse" aria-expanded="false" aria-controls="faq4Collapse">
                                    How do I track my portfolio performance?
                                </button>
                            </h2>
                            <div id="faq4Collapse" class="accordion-collapse collapse" aria-labelledby="faq4Heading"
                                data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Visit the "Portfolio" section to view your total value, cash balance, daily change,
                                    and detailed charts showing performance and asset allocation. You can also see
                                    individual holdings and their current values.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <h6>Feedback</h6>
                        <form id="feedbackForm">
                            <div class="mb-2">
                                <select class="form-select  text-white" id="feedbackType" required>
                                    <option value="" disabled selected>Type</option>
                                    <option value="suggestion">Suggestion</option>
                                    <option value="issue">Issue</option>
                                    <option value="praise">Praise</option>
                                </select>
                            </div>
                            <div class="mb-2">
                                <textarea class="form-control  text-white" id="feedbackMessage" rows="3"
                                    placeholder="Your feedback" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Submit</button>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="userAccountModal" tabindex="-1" aria-labelledby="userAccountModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header border-0">
              <div class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <i class="bi bi-sun"></i>
                    <i class="bi bi-moon"></i>
                </div>
                </div>
                <div class="modal-body text-center">
                    <div class="user-avatar mb-3">
                        <div id="modal-profile-pic-container" class="profile-pic">
                            <div id="modal-user-initials"></div>
                        </div>
                    </div>
                    <h5 id="user-name" class="mb-2"></h5>
                    <p class="mb-1">Cash Balance: <span id="cash-balance" class="text-success"></span></p>
                    <p class="mb-4">Portfolio Value: <span id="portfolio-value" class="text-success"></span></p>

                    <div class="d-flex gap-2 mb-2">
                        <button class="btn btn-outline-success flex-fill" data-bs-toggle="modal" data-bs-target="#mobileMoneyDepositModal" title="Deposit Funds" aria-label="Deposit Funds">
                            <i class="bi bi-arrow-down-circle me-2"></i>Deposit
                        </button>
                        <button class="btn btn-outline-danger flex-fill" data-bs-toggle="modal" data-bs-target="#mobileMoneyWithdrawModal" title="Withdraw Funds" aria-label="Withdraw Funds">
                            <i class="bi bi-arrow-up-circle me-2"></i>Withdraw
                        </button>
                    </div>
                    <button id="logout-btn" class="btn btn-outline-danger w-100" title="Log Out" aria-label="Log Out">
                        <i class="bi bi-box-arrow-right me-2"></i>Log Out
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="stockQuoteModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><span id="modalCompanyName"></span> Stock Quote</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex align-items-center mb-2">
                        <img id="modalCompanyLogo" class="company-logo me-3" alt="Company Logo">
                        <div>
                            <h5 id="modalCompanyFullName" class="mb-0"></h5>
                            <p id="modalCompanyTicker" class="card-text mb-0"></p>
                        </div>
                    </div>
                    <div class="stock-info-row"><span class="stock-info-label">Current Price</span><span id="modalCurrentPrice" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Daily Change</span><span id="modalDailyChange" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Open</span><span id="modalOpen" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">High</span><span id="modalHigh" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Low</span><span id="modalLow" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Volume</span><span id="modalVolume" class="stock-info-value"></span></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-buy text-white" onclick="alert('Buy functionality to be implemented')"><i class="bi bi-plus-circle me-1"></i>Buy</button>
                    <button class="btn btn-sell text-white" onclick="alert('Sell functionality to be implemented')"><i class="bi bi-dash-circle me-1"></i>Sell</button>
                    <button class="btn btn-details text-white" id="modalDetailsBtn"><i class="bi bi-info-circle me-1"></i>Full Details</button>
                </div>
            </div>
        </div>
    </div>  
    <div class="modal fade" id="companyDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content ">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-building me-2"></i>
                        <span id="companyDetailsName"></span>
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Company Basic Info -->
                    <div class="d-flex align-items-center mb-3">
                        <img id="companyDetailsLogo" src="" alt="Company Logo" class="company-logo me-3">
                        <div>
                            <h5 id="companyDetailsFullName" class="mb-0"></h5>
                            <p class="mb-0" id="companyDetailsSector"></p>
                        </div>
                    </div>
                    <!-- Stock Info -->
                    <div class="mb-3">
                        <span id="companyDetailsPrice" class="h5"></span>
                        <small id="companyDetailsDailyChange" class="ms-2"></small>
                    </div>
                    <!-- Company Details -->
                    <div class="row">
                        <div class="col-md-6"> 
                            <ul class="list-group ">
                                <li class="list-group-item "><strong>Ticker:</strong> <span id="companyDetailsTicker"></span></li>
                                <li class="list-group-item "><strong>Open:</strong> <span id="companyDetailsOpen"></span></li>
                                <li class="list-group-item "><strong>High:</strong> <span id="companyDetailsHigh"></span></li>
                                <li class="list-group-item "><strong>Low:</strong> <span id="companyDetailsLow"></span></li>
                                <li class="list-group-item "><strong>Volume:</strong> <span id="companyDetailsVolume"></span></li>
                                <li class="list-group-item "><strong>Market Cap:</strong> <span id="companyDetailsMarketCap"></span></li>
                                <li class="list-group-item "><strong>Listing Date:</strong> <span id="companyDetailsListingDate"></span></li>
                                <li class="list-group-item "><strong>Listing Price:</strong> <span id="companyDetailsListingPrice"></span></li>
                                <li class="list-group-item "><strong>Shares in Issue:</strong> <span id="companyDetailsShares"></span></li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-group ">
                                <li class="list-group-item "><strong>CEO:</strong> <span id="companyDetailsCEO"></span></li>
                                <li class="list-group-item "><strong>CFO:</strong> <span id="companyDetailsCFO"></span></li>
                                <li class="list-group-item "><strong>Company Secretary:</strong> <span id="companyDetailsSecretary"></span></li>
                                <li class="list-group-item "><strong>Transfer Secretary:</strong> <span id="companyDetailsTransferSecretary"></span></li>
                                <li class="list-group-item "><strong>Address:</strong> <span id="companyDetailsAddress"></span></li>
                                <li class="list-group-item "><strong>Phone:</strong> <span id="companyDetailsTel"></span></li>
                                <li class="list-group-item "><strong>Website:</strong> <a href="#" target="_blank" id="companyDetailsWebsite" class="text-info"></a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- Additional Fields from investorScripts.js -->
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <ul class="list-group ">
                                <li class="list-group-item "><strong>Last Updated:</strong> <span id="companyDetailsLastUpdate"></span></li>
                                <li class="list-group-item "><strong>Overview:</strong> <span id="companyDetailsOverview"></span></li>
                                <li class="list-group-item "><strong>Day Range:</strong> <span id="companyDetailsDayRange"></span></li>
                                <li class="list-group-item "><strong>52 Week Range:</strong> <span id="companyDetails52WRange"></span></li>
                                <li class="list-group-item "><strong>P/E Ratio:</strong> <span id="companyDetailsPE"></span></li>
                                <li class="list-group-item "><strong>Dividend Yield:</strong> <span id="companyDetailsDivYield"></span></li>
                                <li class="list-group-item "><strong>RSI:</strong> <span id="companyDetailsRSI"></span></li>
                                <li class="list-group-item "><strong>MACD:</strong> <span id="companyDetailsMACD"></span></li>
                                <li class="list-group-item "><strong>50 DMA:</strong> <span id="companyDetails50DMA"></span></li>
                                <li class="list-group-item "><strong>200 DMA:</strong> <span id="companyDetails200DMA"></span></li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-group ">
                                <li class="list-group-item "><strong>Technical Summary:</strong> <span id="companyDetailsTechSummary"></span></li>
                                <li class="list-group-item "><strong>EPS:</strong> <span id="companyDetailsEPS"></span></li>
                                <li class="list-group-item "><strong>ROE:</strong> <span id="companyDetailsROE"></span></li>
                                <li class="list-group-item "><strong>Debt/Equity:</strong> <span id="companyDetailsDebtEquity"></span></li>
                                <li class="list-group-item "><strong>P/B Ratio:</strong> <span id="companyDetailsPB"></span></li>
                                <li class="list-group-item "><strong>Fundamental Summary:</strong> <span id="companyDetailsFundSummary"></span></li>
                                <li class="list-group-item "><strong>PEG Ratio:</strong> <span id="companyDetailsPEG"></span></li>
                                <li class="list-group-item "><strong>Current Ratio:</strong> <span id="companyDetailsCurrentRatio"></span></li>
                                <li class="list-group-item "><strong>ROIC:</strong> <span id="companyDetailsROIC"></span></li>
                                <li class="list-group-item "><strong>EBITDA Margin:</strong> <span id="companyDetailsEBITDA"></span></li>
                            </ul>
                        </div>
                    </div>
                    <!-- News -->
                    <div class="mt-3">
                        <h6>Recent News</h6>
                        <ul id="companyDetailsNews" class="list-unstyled"></ul>
                    </div>
                    <!-- Ownership -->
                    <div class="mt-3">
                        <h6>Ownership Structure</h6>
                        <div class="progress">
                            <div class="progress-bar bg-primary" id="companyDetailsInst" style="width: 0%"></div>
                            <div class="progress-bar bg-secondary" id="companyDetailsInsiders" style="width: 0%"></div>
                            <div class="progress-bar bg-info" id="companyDetailsPublic" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="orderModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Order Confirmation</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row small mb-1">
                        <div class="col-6">Action:</div>
                        <div class="col-6 text-end text-success" id="modalAction">Buy</div>
                        <div class="col-6">Company:</div>
                        <div class="col-6 text-end" id="modalCompany">AIRTEL</div>
                        <div class="col-6">Order Type:</div>
                        <div class="col-6 text-end" id="modalType">Market Order</div>
                        <div class="col-6">Quantity:</div>
                        <div class="col-6 text-end" id="modalQty">0</div>
                        <div class="col-6">Price per Share:</div>
                        <div class="col-6 text-end" id="modalPrice">MK0.00</div>
                        <div class="col-6">Total Cost:</div>
                        <div class="col-6 text-end fw-bold" id="modalTotal">MK0.00</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmOrder">Confirm Order</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="orderDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-receipt-cutoff me-2"></i>Order Details</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="stock-info-row"><span class="stock-info-label">Date</span><span id="modalOrderDate" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Company</span><span id="modalOrderCompany" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Action</span><span id="modalOrderAction" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Order Type</span><span id="modalOrderType" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Quantity</span><span id="modalOrderQuantity" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Total Cost</span><span id="modalOrderCost" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Status</span><span id="modalOrderStatus" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Order ID</span><span id="modalOrderID" class="stock-info-value"></span></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="mobileMoneyDepositModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-arrow-down-circle me-2"></i>Mobile Money Deposit</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-2">Instantly deposit funds using Mpamba or Airtel Money.</p>
                    <form id="mobileMoneyDepositForm">
                        <div class="mb-2">
                            <label for="depositProvider" class="form-label">Select Provider</label>
                            <select class="form-select" id="depositProvider" required>
                                <option value="" disabled selected>Select a provider</option>
                                <option value="mpamba">Mpamba</option>
                                <option value="airtel">Airtel Money</option>
                            </select>
                        </div>
                        <div class="mb-2">
                            <label for="depositPhoneNumber" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="depositPhoneNumber" placeholder="+265 XXX XXX XXX" required>
                        </div>
                        <div class="mb-2">
                            <label for="depositAmount" class="form-label">Amount (MK)</label>
                            <input type="number" class="form-control" id="depositAmount" placeholder="Enter amount in MK" min="100" required>
                        </div>
                        <button type="submit" class="btn btn-success w-100">Deposit Funds</button>
                    </form>
                    <p class="mt-2 small"><strong>Note:</strong> Ensure your mobile money account has sufficient funds.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="mobileMoneyWithdrawModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-arrow-up-circle me-2"></i>Mobile Money Withdrawal</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-2">Withdraw funds to your mobile money account.</p>
                    <form id="mobileMoneyWithdrawForm">
                        <div class="mb-2">
                            <label for="withdrawProvider" class="form-label">Select Provider</label>
                            <select class="form-select" id="withdrawProvider" required>
                                <option value="" disabled selected>Select a provider</option>
                                <option value="mpamba">Mpamba</option>
                                <option value="airtel">Airtel Money</option>
                            </select>
                        </div>
                        <div class="mb-2">
                            <label for="withdrawPhoneNumber" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="withdrawPhoneNumber" placeholder="+265 XXX XXX XXX" required>
                        </div>
                        <div class="mb-2">
                            <label for="withdrawAmount" class="form-label">Amount (MK)</label>
                            <input type="number" class="form-control" id="withdrawAmount" placeholder="Enter amount in MK" min="100" required>
                        </div>
                        <button type="submit" class="btn btn-danger w-100">Withdraw Funds</button>
                    </form>
                    <p class="mt-2 small"><strong>Note:</strong> Available balance: MK${user.cashBalance.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="transactionDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-receipt me-2"></i>Transaction Details</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="stock-info-row"><span class="stock-info-label">Date</span><span id="modalTransDate" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Method</span><span id="modalTransMethod" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Type</span><span id="modalTransType" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Amount</span><span id="modalTransAmount" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Status</span><span id="modalTransStatus" class="stock-info-value"></span></div>
                    <div class="stock-info-row"><span class="stock-info-label">Transaction ID</span><span id="modalTransID" class="stock-info-value"></span></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="../../Dist/scripts/market.js"></script>
    <script type="module" src="../../Dist/scripts/userData.js"></script>
    <script type="module" src="../../Dist/scripts/transactions.js"></script>
    <script type="module" src="../../Dist/scripts/transfer.js"></script>
    <script type="module" src="../../Dist/scripts/portfolio.js"></script>
    <script type="module" src="../../Dist/scripts/orders.js"></script>
    <script type="module" src="../../Dist/scripts/trade.js"></script>
    <script src="../../Dist/scripts/theme.js"></script>
    <script src="../../Dist/scripts/navScripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
